version: "1.0"

metadata:
  name: "test_100_temporal_ic"
  description: "Small test dataset (100 samples) for IC feature extraction validation"
  author: "Spinlock Team"
  created: "2025-12-31"
  purpose: "Test IC feature extraction pipeline with multi-realization temporal data"

# Same parameter space as production (for consistency)
parameter_space:
  architecture:
    num_layers:
      type: integer
      bounds: [2, 5]
    base_channels:
      type: integer
      bounds: [16, 64]
    kernel_size:
      type: choice
      choices: [3, 5, 7]
    activation:
      type: choice
      choices: ["gelu"]
    dropout_rate:
      type: continuous
      bounds: [0.0, 0.3]

  stochastic:
    noise_type:
      type: choice
      choices: ["gaussian"]
    noise_scale:
      type: continuous
      bounds: [0.00001, 1.0]
      log_scale: true
    noise_schedule:
      type: choice
      choices: ["constant"]
    spatial_correlation:
      type: continuous
      bounds: [0.0, 0.3]

  operator:
    normalization:
      type: choice
      choices: ["instance"]
    grid_size:
      type: choice
      choices: [128]

  evolution:
    update_policy:
      type: choice
      choices: ["residual", "convex"]
      weights: [0.75, 0.25]

# Sampling configuration
sampling:
  strategy: "sobol_stratified"
  sobol:
    scramble: true
    seed: 42
  stratification:
    method: "adaptive"
    num_strata_per_dim: 3
    min_samples_per_stratum: 3
  validation:
    check_discrepancy: true
    check_correlation: true
  total_samples: 100
  batch_size: 2

# Simulation with equal-weighted IC families
simulation:
  device: "cuda"

  parallelism:
    strategy: "data_parallel"
    devices: "auto"

  input_generation:
    method: "sampled"

    ic_type_weights:
      gaussian_random_field_v0: 0.05
      gaussian_random_field_v1: 0.05
      gaussian_random_field_v2: 0.05
      gaussian_random_field_v3: 0.05
      gaussian_random_field_v4: 0.05
      multiscale_grf_low: 0.0833
      multiscale_grf_mid: 0.0833
      multiscale_grf_high: 0.0834
      structured: 0.25
      localized: 0.25

    gaussian_random_field_v0:
      length_scale: 0.05
      variance: 0.25
    gaussian_random_field_v1:
      length_scale: 0.05
      variance: 0.5
    gaussian_random_field_v2:
      length_scale: 0.05
      variance: 1.0
    gaussian_random_field_v3:
      length_scale: 0.05
      variance: 2.0
    gaussian_random_field_v4:
      length_scale: 0.05
      variance: 4.0

    multiscale_grf_low:
      scales: [0.30, 0.35, 0.40]
      variance: 1.0
    multiscale_grf_mid:
      scales: [0.08, 0.10, 0.12]
      variance: 1.0
    multiscale_grf_high:
      scales: [0.02, 0.03, 0.04]
      variance: 1.0

    structured:
      num_structures: 3
      structure_types: ["stripe"]

    localized:
      num_blobs: 5
      min_width: 5.0
      max_width: 15.0

  precision: "float16"
  num_realizations: 3
  num_timesteps: 50  # Reduced for test (10Ã— faster than T=500)

  extract_operator_features: true

# Dataset generation
dataset:
  output_path: "./datasets/test_100_temporal_ic.h5"

  storage:
    backend: "hdf5"
    compression: "gzip"
    compression_level: 4
    chunk_size: 10
    store_trajectories: true  # Store for validation

logging:
  level: "INFO"
