# Normalization Comparison Experiment: Standard (mean/std) Normalization
# 1K samples, ARCHITECTURE + SUMMARY, 200 epochs
# BASELINE for comparison with MAD normalization

# Dataset
dataset_path: "datasets/baseline_10k.h5"
max_samples: 1000  # Use only 1K samples for fast comparison

# Feature Families
families:
  architecture:
    encoder: MLPEncoder
    encoder_params:
      hidden_dims: [256, 128]
      output_dim: 128
      dropout: 0.1
      activation: "relu"
      batch_norm: true

  summary:
    encoder: MLPEncoder
    encoder_params:
      hidden_dims: [512, 256]
      output_dim: 128
      dropout: 0.1
      activation: "relu"
      batch_norm: true

# Normalization method
normalization_method: "standard"  # BASELINE: mean/std normalization

# VQ-VAE Architecture
model:
  group_embedding_dim: 256
  group_hidden_dim: 512
  levels: []  # Auto-computed
  commitment_cost: 0.25
  use_ema: true
  decay: 0.99
  dropout: 0.1
  orthogonality_weight: 0.1
  informativeness_weight: 0.1

# Training
training:
  batch_size: 128  # Appropriate for 1K samples
  learning_rate: 0.001
  num_epochs: 200  # Sufficient for comparison
  optimizer: "adam"
  scheduler: null
  warmup_epochs: 0

  # Category discovery (auto mode)
  category_assignment: "auto"
  num_categories_auto: null
  orthogonality_target: 0.15
  min_features_per_category: 3
  max_clusters: 25

  # Loss weights
  reconstruction_weight: 1.0
  vq_weight: 1.0
  orthogonality_weight: 0.1
  informativeness_weight: 0.1
  topo_weight: 0.02
  topo_samples: 256

  # Checkpointing
  save_every: 50
  checkpoint_dir: "checkpoints/experiments/normalization_comparison/1k_standard"

  # Callbacks
  early_stopping_patience: 50
  early_stopping_min_delta: 0.01
  use_smart_reset: true  # Use intelligent resets
  dead_code_threshold: 10.0

  # Validation
  val_every_n_epochs: 5

  # Performance
  use_torch_compile: true

# Logging
logging:
  wandb: false
  log_interval: 50
  eval_interval: 100
  verbose: true

# Random seed
random_seed: 42

# Expected Performance:
# - Training time: ~3-5 minutes
# - Metrics: Baseline for comparison with MAD normalization
